NameError - undefined local variable or method `slug' for #<FinderApi:0x007fd43cc45ac8>:
	/Users/davidheath/alphagov/finder-api/finder_api.rb:9:in `block in <class:FinderApi>'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:1593:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:1593:in `block in compile!'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:957:in `[]'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:957:in `block (3 levels) in route!'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:976:in `route_eval'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:957:in `block (2 levels) in route!'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:997:in `block in process_route'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:995:in `catch'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:995:in `process_route'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:955:in `block in route!'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:954:in `each'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:954:in `route!'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:1067:in `block in dispatch!'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:1049:in `block in invoke'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:1049:in `catch'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:1049:in `invoke'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:1064:in `dispatch!'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:889:in `block in call!'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:1049:in `block in invoke'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:1049:in `catch'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:1049:in `invoke'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:889:in `call!'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:877:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-protection-1.5.2/lib/rack/protection/xss_header.rb:18:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-protection-1.5.2/lib/rack/protection/path_traversal.rb:16:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-protection-1.5.2/lib/rack/protection/json_csrf.rb:18:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-protection-1.5.2/lib/rack/protection/base.rb:50:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-protection-1.5.2/lib/rack/protection/base.rb:50:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-protection-1.5.2/lib/rack/protection/frame_options.rb:31:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-1.5.2/lib/rack/logger.rb:15:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-1.5.2/lib/rack/commonlogger.rb:33:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:217:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:210:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-1.5.2/lib/rack/head.rb:11:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-1.5.2/lib/rack/methodoverride.rb:21:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/show_exceptions.rb:21:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:180:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/sinatra-1.4.4/lib/sinatra/base.rb:2004:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-test-0.6.2/lib/rack/mock_session.rb:30:in `request'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-test-0.6.2/lib/rack/test.rb:230:in `process_request'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/rack-test-0.6.2/lib/rack/test.rb:57:in `get'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/2.0.0/forwardable.rb:171:in `get'
	/Users/davidheath/alphagov/finder-api/features/step_definitions/schema_steps.rb:2:in `block in <top (required)>'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/core_ext/instance_exec.rb:48:in `instance_exec'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/core_ext/instance_exec.rb:48:in `block in cucumber_instance_exec'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/core_ext/instance_exec.rb:69:in `cucumber_run_with_backtrace_filtering'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/core_ext/instance_exec.rb:36:in `cucumber_instance_exec'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/rb_support/rb_step_definition.rb:97:in `invoke'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/step_match.rb:25:in `invoke'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/step_invocation.rb:60:in `invoke'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/step_invocation.rb:38:in `accept'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:106:in `block in visit_step'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:170:in `broadcast'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:105:in `visit_step'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/step_collection.rb:19:in `block in accept'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/step_collection.rb:18:in `each'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/step_collection.rb:18:in `accept'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:100:in `block in visit_steps'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:170:in `broadcast'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:99:in `visit_steps'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:15:in `block in execute'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/runtime.rb:83:in `block (2 levels) in with_hooks'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/runtime.rb:99:in `before_and_after'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/runtime.rb:82:in `block in with_hooks'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/runtime/support_code.rb:120:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/runtime/support_code.rb:120:in `block (3 levels) in around'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/language_support/language_methods.rb:9:in `block in around'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/language_support/language_methods.rb:97:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/language_support/language_methods.rb:97:in `execute_around'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/language_support/language_methods.rb:8:in `around'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/runtime/support_code.rb:119:in `block (2 levels) in around'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/runtime/support_code.rb:123:in `call'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/runtime/support_code.rb:123:in `around'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/runtime.rb:94:in `around'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/runtime.rb:81:in `with_hooks'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:13:in `execute'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/scenario.rb:32:in `block in accept'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/scenario.rb:79:in `with_visitor'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/scenario.rb:31:in `accept'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:58:in `block in visit_feature_element'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:170:in `broadcast'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:57:in `visit_feature_element'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/feature.rb:38:in `block in accept'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/feature.rb:37:in `each'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/feature.rb:37:in `accept'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:27:in `block in visit_feature'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:170:in `broadcast'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:26:in `visit_feature'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/features.rb:28:in `block in accept'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/features.rb:17:in `each'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/features.rb:17:in `each'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/features.rb:27:in `accept'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:21:in `block in visit_features'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:170:in `broadcast'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/ast/tree_walker.rb:20:in `visit_features'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/runtime.rb:49:in `run!'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/lib/cucumber/cli/main.rb:47:in `execute!'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/lib/ruby/gems/2.0.0/gems/cucumber-1.3.10/bin/cucumber:13:in `<top (required)>'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/bin/cucumber:23:in `load'
	/Users/davidheath/.rbenv/versions/2.0.0-p353/bin/cucumber:23:in `<main>'
127.0.0.1 - - [19/Feb/2014 16:42:40] "GET /cma-cases.json " 200 4659 0.0033
127.0.0.1 - - [19/Feb/2014 16:48:53] "GET /cma-cases.json " 200 4659 0.0032
127.0.0.1 - - [19/Feb/2014 16:49:49] "GET /cma-cases.json " 200 4659 0.0033
127.0.0.1 - - [19/Feb/2014 16:50:43] "GET /cma-cases.json " 200 4659 0.0033
127.0.0.1 - - [19/Feb/2014 16:50:57] "GET /cma-cases.json " 200 4659 0.0032
127.0.0.1 - - [19/Feb/2014 16:51:28] "GET /cma-cases.json " 200 4659 0.0033
127.0.0.1 - - [19/Feb/2014 16:51:34] "GET /cma-cases.json " 200 4659 0.0034
